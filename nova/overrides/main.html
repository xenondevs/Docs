{% extends "base.html" %}

{% block styles %}
<script>
    (function () {
        const savedWidth = localStorage.getItem("md-width") || "slim";
        if (savedWidth === "wide" || savedWidth === "full") {
            document.documentElement.setAttribute("data-md-width", savedWidth);
        }
        // Store for width-toggle.js to use
        window.__mdWidthMode = savedWidth;
    })();
</script>
{{ super() }}
{% endblock %}

{% block content %}
<script>
    // Inject toggle button immediately when header is available
    (function () {
        window.__mdWidthIcons = {
            maximize: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-2 -2 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g transform="rotate(45 12 12)"><path d="M15 3h6v6"/><path d="m21 3-7 7"/><path d="m3 21 7-7"/><path d="M9 21H3v-6"/></g></svg>',
            minimize: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-2 -2 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g transform="rotate(45 12 12)"><path d="m14 10 7-7"/><path d="M20 10h-6V4"/><path d="m3 21 7-7"/><path d="M4 14h6v6"/></g></svg>'
        };

        const mode = window.__mdWidthMode || "slim";
        const btn = document.createElement("button");
        btn.id = "md-width-toggle";
        btn.className = "md-header__button md-width-toggle";
        btn.setAttribute("aria-label", "Toggle page width");
        btn.innerHTML = mode === "full" ? window.__mdWidthIcons.minimize : window.__mdWidthIcons.maximize;

        const header = document.querySelector(".md-header__inner");
        if (header) {
            const searchButton = header.querySelector(".md-header__button.md-icon[for='__search']")
                || header.querySelector("label.md-header__button");
            if (searchButton) {
                searchButton.parentNode.insertBefore(btn, searchButton);
            } else {
                header.appendChild(btn);
            }
        }
    })();
</script>
{{ super() }}
{% endblock %}

